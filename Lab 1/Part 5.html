<!-- Exercise 9 and 10 -->


<!DOCTYPE html>

<html lang="en">

    <head>
        <script src='https://d3js.org/d3.v7.min.js'></script>
    </head>

    <body>

        <!-- Exercise 9 -->

        <script src='https://d3js.org/d3.v7.min.js'></script>

        <script>

            //The .csv file which consists of the data, is hosted on GitHub
            //Storing the path of the GitHub file in a variable
            let titaniccsv = 'https://raw.githubusercontent.com/dsindy/kaggle-titanic/master/data/test.csv';

            var mr = 0;                 //Counter to count how many names have the prefix - Mr.
            var mrs = 0;                //Counter to count how many names have the prefix - Mrs.                                                                                       
            var otherCount = 0;         //Counter to count how many names have other prefixes like Dr., Miss., etc.


            var male = 0;              //Counter to count how many passenegers were male
            var female = 0;            //Counter to count how many passenegers were female


            var zeroNine = 0;          //Counter to count how many passenegers were within the age group -> 0-9
            var tenNineteen = 0;       //Counter to count how many passenegers were within the age group -> 10-19
            var twenty29 = 0;          //Counter to count how many passenegers were within the age group -> 20-29
            var thirty39 = 0;          //Counter to count how many passenegers were within the age group -> 30-39         
            var fourty49 = 0;          //Counter to count how many passenegers were within the age group -> 40-49
            var fifty59 = 0;           //Counter to count how many passenegers were within the age group -> 50-59
            var sixtyAbove = 0;        //Counter to count how many passenegers were within the age group -> 60 and above


            //Loading the csv file
            //The callback function is used to check multiple things such as
            // -> Checks if the current name has the prefix Mr.or Mrs., or other values liek Dr., Miss, etc
            // -> Also checks about the gender of the passenger
            // -> Also checks about the various age groups
            d3.csv(titaniccsv, function(data){

                //If statement to check if the current passenger has the prefix - Mr.
                if(data.Name.includes("Mr.") == true){

                    //If this is true, then increment the mr counter
                    mr++;
                }
                //Else check whether the current passenger has the prefix - Mrs.
                else if(data.Name.includes("Mrs.") == true){

                    //If this is true, then increment the mrs counter
                    mrs++;
                }
                //If neither of the above statements are true, then increment the otherCount counter
                else{
                    otherCount++;
                }



                //If statement to check if the current passenger is male
                if(data.Sex == "male"){

                    //If this is true, then increment the male counter
                    male++;
                }
                //Else check whether the current passenger is female
                else if(data.Sex == "female"){

                    //If this is true, then increment the female counter
                    female++;
                }




                //This if statement checks if the current passenger
                //is between 0 to 9
                //If yes, then increment the 0-9 age group counter
                if(data.Age>=0 && data.Age<10){
                    zeroNine++;
                }

                //Else check if the current passenger
                //is between 10 to 19
                //If yes, then increment the 10-19 age group counter
                else if(data.Age>=10 && data.Age<20){
                    tenNineteen++;
                }

                //Else check if the current passenger
                //is between 20 to 29
                //If yes, then increment the 20-29 age group counter
                else if(data.Age>=20 && data.Age<30){
                    twenty29++;
                }

                //Else check if the current passenger
                //is between 30 to 39
                //If yes, then increment the 30-39 age group counter
                else if(data.Age>=30 && data.Age<40){
                    thirty39++;
                }

                //Else check if the current passenger
                //is between 40 to 49
                //If yes, then increment the 40-49 age group counter
                else if(data.Age>=40 && data.Age<50){
                    fourty49++;
                }

                //Else check if the current passenger
                //is between 50 to 59
                //If yes, then increment the 50-59 age group counter
                else if(data.Age>=50 && data.Age<60){
                    fifty59++;
                }

                //Else check if the current passenger
                //is 60 or above
                //If yes, then increment the 60 or above age group counter
                else if(data.Age>=60){
                    sixtyAbove++;
                }


            }).then(function(data){

                //Print out the final values of each of these counters on the console
                console.log("Mr. count " + mr);
                console.log("Mrs. count " + mrs);
                console.log("Other count " + otherCount);

                console.log(" ")

                console.log("Male count " + male);
                console.log("Female count " + female);
                
                console.log(" ")

                console.log("Age Group 0-9: " + zeroNine);
                console.log("Age Group 10-19: " + tenNineteen);
                console.log("Age Group 20-29: " + twenty29);
                console.log("Age Group 30-39: " + thirty39);
                console.log("Age Group 40-49: " + fourty49);
                console.log("Age Group 50-59: " + fifty59);
                console.log("Age Group 60 and Above: " + sixtyAbove);
            });

        </script>



        <!-- Exercise 10 -->
        <script src='https://d3js.org/d3.v7.min.js'></script>

        <script>

            //The .csv file which consists of the data, is hosted on GitHub
            //Storing the path of the GitHub file in a variable
            let heartfailurecsv = 'https://raw.githubusercontent.com/akmand/datasets/master/heart_failure.csv';

            // var over50 = 0;


            var one30 = 0;             //Counter to count how many patients within the age range 1-30 died of heart failure
            var thirtyone40 = 0;       //Counter to count how many patients within the age range 31-40 died of heart failure
            var fourtyone60 = 0;       //Counter to count how many patients within the age range 41-60 died of heart failure
            var sixtyone100 = 0;       //Counter to count how many patients within the age range 61-100 died of heart failure


            //Initializing an array, which will help in storing the final values
            //of the above counters
            var heartFail = [];


            //Loading the csv file
            //The callback function is used to check if the current element the function is
            //reading, belongs to one of the age ranges
            //If yes, then increment the counter
            d3.csv(heartfailurecsv, function(data) {

                //This if statement checks if the current data value
                //is between 1 to 30
                //If yes, then increment the 1-30 age group counter
                if(data.age>=1 && data.age<=30){
                    one30++;
                }

                //Else check if the current data value
                //is between 31 to 40
                //If yes, then increment the 31-40 age group counter
                else if(data.age>=31 && data.age<=40){
                    thirtyone40++;
                }

                //Else check if the current data value
                //is between 41 to 60
                //If yes, then increment the 41-60 age group counter
                else if(data.age>=41 && data.age<=60){
                    fourtyone60++;
                }

                //Else check if the current data value
                //is between 61 to 100
                //If yes, then increment the 61-100 age group counter
                else if(data.age>=61 && data.age<=100){
                    sixtyone100++;
                }



            }).then(function(data){
                
                //To the array that we defined above,
                //create an object array having keys - oneThirty, thirtyoneFourty, foutyoneSixty, sixtyoneHundred 
                //and each of the keys, has one of the counters as its value
                heartFail=[
                                {oneThirty: one30},
                                {thirtyoneFourty: thirtyone40},
                                {foutyoneSixty: fourtyone60},
                                {sixtyoneHundred: sixtyone100}]


                //Creating a placeholder for the <p> tag
                //This is done so that we can display the below items
                let arr = d3.select("body")
                            .selectAll("p")
                            .data(heartFail)
                            .enter()
                            .append('p');  

                //We want to print out the results on the page            
                let arr1 = d3.select("body")
                             .selectAll("p")
                             .data(heartFail)
                             .text(function (d, i){

                                //If the function is reading the first element
                                //then return the final value of the counter used for the age group
                                //1-30
                                if (i ==0){
                                    return "Heart failure 1-30: " +d.oneThirty;
                                }

                                //Else if the function is reading the second element
                                //then return the final value of the counter used for the age group
                                //31-40
                                else if(i==1){
                                    return "Heart failure 31-40: " +d.thirtyoneFourty;
                                }

                                //Else if the function is reading the third element
                                //then return the final value of the counter used for the age group
                                //41-60
                                else if(i==2){
                                    return "Heart failure 41-60: " +d.foutyoneSixty;
                                }

                                //Else if the function is reading the fourth element
                                //then return the final value of the counter used for the age group
                                //61-100
                                else if(i==3){
                                    return "Heart failure 61-100: " +d.sixtyoneHundred;
                                }
                                //console.log(i)
                            }); 
            });

            

        </script>
    </body>
</html>


