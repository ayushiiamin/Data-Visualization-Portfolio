<!-- REFERENCES -->

<!--   
1) GeeksforGeeks. (2019). How to get the first key name of a JavaScript object ? - GeeksforGeeks. [online] 
Available at: https://www.geeksforgeeks.org/how-to-get-the-first-key-name-of-a-javascript-object/
-->




<!DOCTYPE html>

<html lang = "en">
    <head>
        <script src='https://d3js.org/d3.v7.min.js'></script>
    </head>

    <body>
        <script type='text/javascript' src='https://d3js.org/d3.v7.min.js'></script>

        
        <button onclick="showPie()">Click for Pie Chart</button>

        <script>
            var dataset = {
                apples: [5345, 2879, 1997, 2437, 4045],
                oranges: [6400, 4116, 5589, 428, 1664]
            };

            var c = -1;

            var width = 460;
            var height = 300;
            var radius = Math.min(width, height) / 2;

            var color = d3.scaleOrdinal().range(d3.schemeSet3);

            var pie = d3.pie()
                        .sort(null);

            var arc = d3.arc()
                        .innerRadius(radius - 100)
                        .outerRadius(radius - 50);

            var svg = d3.select("body")
                        .append('div')
                        .append("svg")
                        .attr("width", width)
                        .attr("height", height)
                        .append("g")
                        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

            function showPie(){
                c++;

                if(c < Object.keys(dataset).length){
                    console.log("ENTERED LOOP")
                    console.log(" ")
                    console.log(Object.keys(dataset)[c])

                    var path = svg.selectAll("path")
                                    .data(pie(dataset[Object.keys(dataset)[c]]))     //(GeeksforGeeks, 2020)
                    
                    path.enter()
                        .append("path")
                        .merge(path)
                        .transition()
                        .duration(1000)
                        .attr("fill", function(d, i){
                            return color(i);
                        })
                        .attr("d", arc)
                        .attrTween("d", function(d){
                            var i = d3.interpolate(d.endAngle, d.startAngle);
                                            return function (t) {
                                                d.startAngle = i(t);
                                                return arc(d);
                                            }
                        });

                        console.log("EXIT LOOP")
                        console.log(" ")

                    path.exit().remove();
                }
                else{
                    alert("NO MORE DATASETS LEFT");
                }
            }
        </script>
    </body>
</html>